<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reklam&Kampanya OluÅŸtur</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --accent: #475569; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 15px; color: #1e293b; }
        
        /* Panel TasarÄ±mÄ± */
        .admin-panel { background: white; max-width: 650px; margin: 0 auto 30px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.08); }
        .section { background: #f1f5f9; border-radius: 12px; margin-bottom: 12px; overflow: hidden; border: 1px solid #e2e8f0; }
        .section-header { padding: 12px 15px; background: #e2e8f0; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center; font-size: 13px; color: #334155; }
        .section-content { padding: 15px; display: none; } 
        .section.active .section-content { display: block; }

        label { display: block; font-size: 11px; font-weight: 800; margin-bottom: 6px; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
        input, textarea, select { width: 100%; padding: 12px; border: 2px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; margin-bottom: 12px; font-size: 14px; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; }
        
        .check-group { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 13px; font-weight: bold; color: var(--accent); }
        .check-group input { width: auto; margin: 0; }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn { padding: 16px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; color: white; font-size: 15px; }
        .btn-blue { background: linear-gradient(135deg, #2563eb, #1d4ed8); grid-column: span 2; }
        .btn-print { background: #059669; }

        /* YAZDIRMA ALANI & DESENLER */
        #printArea { display: none; width: 210mm; margin: 0 auto; background: white; padding: 10mm; box-sizing: border-box; }
        
        /* Arka Plan Desenleri (Ink-Friendly / MÃ¼rekkep Dostu) */
        .bg-white { background: white; }
        .bg-dots { 
            background-color: #fdfdfd; 
            background-image: radial-gradient(#cbd5e1 1px, transparent 1px); 
            background-size: 20px 20px; 
        }
        .bg-lines { 
            background: repeating-linear-gradient(45deg, #f8fafc, #f8fafc 10px, #e2e8f0 10px, #e2e8f0 11px); 
        }
        .bg-modern {
            background: linear-gradient(135deg, #eff6ff 0%, #f0fdf4 100%);
        }
        .bg-gold {
            background: linear-gradient(to bottom, #fffbeb, #fff);
            border-color: #d97706 !important;
        }

        .grid-1 { display: grid; grid-template-columns: 1fr; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10mm; }
        .grid-4 { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 5mm; height: 277mm; }

        .qr-card { 
            border: 4px solid #1e293b; padding: 20px; border-radius: 24px; text-align: center; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; box-sizing: border-box;
            position: relative; overflow: hidden;
        }

        .card-title { font-size: 20px; font-weight: 900; margin-bottom: 8px; line-height: 1.2; z-index: 2; position: relative; }
        .campaign-text { font-size: 14px; color: #334155; margin-bottom: 8px; font-weight: 600; font-style: italic; z-index: 2; position: relative; }
        .date-badge { 
            font-size: 11px; color: #dc2626; font-weight: 800; text-transform: uppercase; 
            margin-bottom: 15px; padding: 4px 10px; background: rgba(255,255,255,0.9); 
            border-radius: 20px; border: 1px solid #dc2626; display: inline-block; z-index: 2; position: relative;
        }
        
        /* QR Kodun ArkasÄ±na Beyaz Kutu (Okunabilirlik Ä°Ã§in) */
        .qr-perfect-center { 
            position: relative; display: inline-block; 
            background: white; padding: 10px; border-radius: 15px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); z-index: 2;
        }
        .qr-logo-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 45px; height: 45px; background: white; padding: 4px; border-radius: 8px; z-index: 10; object-fit: contain; }

        @media print {
            .no-print { display: none !important; }
            #printArea { display: grid !important; margin: 0; }
            .bg-dots, .bg-lines, .bg-modern, .bg-gold { -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="admin-panel no-print">
        <h2 style="text-align:center; color: var(--primary); margin:0 0 5px 0;">ğŸš€ SEO & Marketing Studio</h2>
        <p style="text-align:center; font-size:12px; color:#64748b; margin-bottom:20px;">Trafik ArtÄ±rÄ±cÄ± AkÄ±llÄ± Algoritma Aktif</p>

        <div class="section active">
            <div class="section-header" onclick="toggleSection(this)">ğŸ“ˆ GOOGLE TRAFÄ°K BOOST (Ã–NERÄ°LEN) <span>â–¼</span></div>
            <div class="section-content">
                <p style="font-size:11px; color:#059669; background:#ecfdf5; padding:8px; border-radius:5px; margin-top:0;">
                    ğŸ’¡ <b>Ä°pucu:</b> DoÄŸrudan link yerine iÅŸletme adÄ±nÄ±zÄ± girerseniz, mÃ¼ÅŸteri Google'da sizi aratmÄ±ÅŸ gibi olur. Bu, sÄ±ralamanÄ±zÄ± yÃ¼kseltir.
                </p>
                
                <label>Ä°ÅLETME ADI VE ÅEHÄ°R (Google AramasÄ± OluÅŸturur)</label>
                <input type="text" id="businessName" placeholder="Ã–rn: PaÅŸa DÃ¶ner KadÄ±kÃ¶y">
                
                <label style="margin-top:10px;">VEYA DÄ°REKT LÄ°NK (Opsiyonel)</label>
                <input type="text" id="directUrl" placeholder="http://...">
            </div>
        </div>

        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">ğŸ“¢ KAMPANYA DETAYLARI <span>â–¼</span></div>
            <div class="section-content">
                <label>Kampanya Metni</label>
                <textarea id="campaignTxt" rows="2">DeÄŸerli yorumlarÄ±nÄ±zla iÅŸletmemize destek olun, sÃ¼rpriz ikramlar kazanÄ±n!</textarea>
                
                <label class="check-group">
                    <input type="checkbox" id="addDate" checked> Otomatik Tarih Ekle (Aciliyet Hissi YaratÄ±r)
                </label>
            </div>
        </div>

        <div class="section">
            <div class="section-header" onclick="toggleSection(this)">ğŸ¨ TASARIM & DESEN <span>â–¼</span></div>
            <div class="section-content">
                <label>Kart Arka Plan Deseni</label>
                <select id="bgPattern">
                    <option value="bg-white">Sade Beyaz (Klasik)</option>
                    <option value="bg-dots">Modern NoktalÄ± (Az MÃ¼rekkep)</option>
                    <option value="bg-lines">Ä°nce Ã‡izgili (Kurumsal)</option>
                    <option value="bg-modern">Soft Mavi/YeÅŸil GeÃ§iÅŸ</option>
                    <option value="bg-gold">Gold Premium (AltÄ±n Ã‡erÃ§eve)</option>
                </select>

                <label>Kart BaÅŸlÄ±ÄŸÄ±</label>
                <input type="text" id="mainTitle" value="BÄ°ZÄ° DEÄERLENDÄ°RÄ°N">

                <label>Sayfadaki Adet</label>
                <select id="qrCount">
                    <option value="2">2 Adet (BÃ¼yÃ¼k Boy)</option>
                    <option value="4" selected>4 Adet (Masa ÃœstÃ¼ Ä°deal)</option>
                </select>

                <label>Logo YÃ¼kle</label>
                <input type="file" id="logoInp" accept="image/*" onchange="loadLogo(this)">
            </div>
        </div>

        <div class="btn-group">
            <button class="btn btn-blue" onclick="generate()">âœ¨ TASARIMI OLUÅTUR</button>
            <button class="btn btn-print" onclick="window.print()">ğŸ–¨ï¸ YAZDIR</button>
        </div>
    </div>

    <div id="printArea"></div>

<script>
    let logoData = null;

    function toggleSection(header) {
        header.parentElement.classList.toggle('active');
    }

    function loadLogo(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => { logoData = e.target.result; };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function getFormattedDate() {
        const d = new Date();
        const months = ["Ocak", "Åubat", "Mart", "Nisan", "MayÄ±s", "Haziran", "Temmuz", "AÄŸustos", "EylÃ¼l", "Ekim", "KasÄ±m", "AralÄ±k"];
        return `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;
    }

    function generate() {
        const area = document.getElementById('printArea');
        const busName = document.getElementById('businessName').value;
        const directUrl = document.getElementById('directUrl').value;
        const campaign = document.getElementById('campaignTxt').value;
        const count = parseInt(document.getElementById('qrCount').value);
        const title = document.getElementById('mainTitle').value;
        const bgClass = document.getElementById('bgPattern').value;
        const showDate = document.getElementById('addDate').checked;

        // SEO TRAFÄ°K ALGORÄ°TMASI
        let finalQrData = "";
        
        if (busName && !directUrl) {
            // 1. YÃ¶ntem: Arama Sorgusu (SEO Boost)
            // MÃ¼ÅŸteri "Ä°ÅŸletme AdÄ±"nÄ± Google'da aratmÄ±ÅŸ gibi davranÄ±r.
            finalQrData = `https://www.google.com/search?q=${encodeURIComponent(busName)}`;
        } else if (directUrl) {
            // 2. YÃ¶ntem: Direkt Link (UTM Ekli)
            finalQrData = directUrl + (directUrl.includes('?') ? '&' : '?') + "utm_source=Physical_QR&utm_medium=Table_Tent";
        } else {
            // 3. YÃ¶ntem: Sadece Metin
            finalQrData = campaign || "HoÅŸgeldiniz";
        }

        const dateStr = showDate ? `GEÃ‡ERLÄ°LÄ°K: ${getFormattedDate()}` : "";
        
        area.innerHTML = '';
        area.className = `grid-${count}`;
        const qrSize = (count === 4) ? 140 : 220;

        for (let i = 0; i < count; i++) {
            const card = document.createElement('div');
            card.className = `qr-card ${bgClass}`; // SeÃ§ilen deseni uygula
            
            card.innerHTML = `
                <div class="card-title">${title}</div>
                <div class="campaign-text">${campaign}</div>
                ${showDate ? `<div class="date-badge">${dateStr}</div>` : ''}
                
                <div class="qr-perfect-center">
                    <div id="qr_gen_${i}"></div>
                    ${logoData ? `<img src="${logoData}" class="qr-logo-overlay">` : ''}
                </div>
                
                <div style="margin-top:15px; font-size:10px; font-weight:800; color:#64748b; z-index:2; position:relative;">
                    KAMERA Ä°LE OKUTUN & FIRSATI YAKALAYIN
                </div>
            `;
            area.appendChild(card);

            new QRCode(document.getElementById(`qr_gen_${i}`), {
                text: finalQrData,
                width: qrSize,
                height: qrSize,
                colorDark: "#000000",
                correctLevel: QRCode.CorrectLevel.H
            });
        }

        area.style.display = 'grid';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
</script>
</body>
</html>
