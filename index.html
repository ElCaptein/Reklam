<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°ÅŸletme Bluetooth Reklam Paneli v2</title>
    <style>
        :root { --primary: #2563eb; --success: #10b981; --bg: #f3f4f6; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .card { background: white; width: 95%; max-width: 450px; padding: 25px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: 1px solid #e5e7eb; }
        h2 { color: #111827; text-align: center; margin-bottom: 25px; font-size: 1.6rem; }
        
        /* EditÃ¶r AlanÄ± */
        .editor { background: #f9fafb; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #d1d5db; }
        label { display: block; font-size: 13px; font-weight: 600; color: #374151; margin-bottom: 5px; }
        input, textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #d1d5db; border-radius: 10px; box-sizing: border-box; font-size: 14px; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        
        /* Buton */
        .btn { width: 100%; background: var(--primary); color: white; border: none; padding: 16px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .btn:active { transform: scale(0.98); }
        .btn:disabled { background: #94a3b8; cursor: not-allowed; }

        /* Durum ve Reklam Ã‡Ä±ktÄ±sÄ± */
        #status { margin-top: 15px; padding: 12px; border-radius: 10px; text-align: center; font-size: 13px; display: none; }
        .reklam-sonuc { margin-top: 25px; padding: 20px; border: 3px solid var(--primary); border-radius: 15px; background: #eff6ff; display: none; animation: fadeIn 0.4s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .device-info { font-size: 11px; color: #6b7280; margin-top: 15px; padding-top: 10px; border-top: 1px solid #dbeafe; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<div class="card">
    <h2>ðŸ“¡ Reklam YÃ¶netimi</h2>
    
    <div class="editor">
        <label>Kampanya BaÅŸlÄ±ÄŸÄ±</label>
        <input type="text" id="titleInput" placeholder="Ã–rn: %30 Ä°ndirim FÄ±rsatÄ±!" value="HoÅŸ Geldiniz!">
        
        <label>MÃ¼ÅŸteri MesajÄ±</label>
        <textarea id="msgInput" rows="3" placeholder="Reklam metnini buraya yazÄ±n...">Bluetooth ile baÄŸlandÄ±ÄŸÄ±nÄ±z iÃ§in kasada %15 indirim kazandÄ±nÄ±z! Kod: BT2026</textarea>
    </div>

    <button id="mainBtn" class="btn" onclick="startMarketing()">
        <span>ETRAFI TARA & YAYINLA</span>
    </button>

    <div id="status"></div>

    <div id="reklamSonuc" class="reklam-sonuc">
        <h3 id="resTitle" style="margin: 0 0 10px 0; color: var(--primary); font-size: 1.4rem;"></h3>
        <p id="resMsg" style="margin: 0; color: #1e293b; line-height: 1.5; font-size: 15px;"></p>
        
        <div class="device-info">
            <span>BaÄŸlÄ± Cihaz: <b id="resDevice" style="color: var(--success);"></b></span>
            <span id="resTime"></span>
        </div>
    </div>
</div>

<script>
    async function startMarketing() {
        const btn = document.getElementById('mainBtn');
        const status = document.getElementById('status');
        const result = document.getElementById('reklamSonuc');
        const titleVal = document.getElementById('titleInput').value;
        const msgVal = document.getElementById('msgInput').value;

        try {
            // UI HazÄ±rlÄ±ÄŸÄ±
            btn.disabled = true;
            status.style.display = "block";
            status.style.background = "#f3f4f6";
            status.style.color = "#374151";
            status.textContent = "Bluetooth taranÄ±yor... (LÃ¼tfen cihaz seÃ§in)";

            // Web Bluetooth API - Android iÃ§in GeniÅŸletilmiÅŸ Servisler
            const device = await navigator.bluetooth.requestDevice({
                acceptAllDevices: true,
                optionalServices: [
                    'generic_access', 
                    'device_information', 
                    'battery_service'
                ]
            });

            // BaÅŸarÄ±lÄ± BaÄŸlantÄ±
            status.style.background = "#dcfce7";
            status.style.color = "#065f46";
            status.textContent = "Cihaz TanÄ±mlandÄ±!";

            // Verileri Ekrana Bas
            document.getElementById('resTitle').textContent = titleVal;
            document.getElementById('resMsg').textContent = msgVal;
            
            // Ä°sim null ise ID'yi kullan
            document.getElementById('resDevice').textContent = device.name ? device.name : "Android Cihaz (" + device.id.slice(-4) + ")";
            
            const simdi = new Date();
            document.getElementById('resTime').textContent = simdi.getHours() + ":" + simdi.getMinutes();

            result.style.display = "block";

        } catch (error) {
            status.style.display = "block";
            status.style.background = "#fee2e2";
            status.style.color = "#991b1b";
            
            if(error.name === 'NotFoundError') {
                status.textContent = "Tarama iptal edildi.";
            } else if(error.name === 'SecurityError') {
                status.textContent = "Hata: HTTPS Ã¼zerinden Ã§alÄ±ÅŸtÄ±rmalÄ±sÄ±nÄ±z!";
            } else {
                status.textContent = "Hata: " + error.message;
            }
            console.error(error);
        } finally {
            btn.disabled = false;
        }
    }
</script>

</body>
</html>            
