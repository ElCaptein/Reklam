<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profesyonel QR & BLE Reklam Ä°stasyonu</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --p: #2563eb; --s: #059669; --bg: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 0; }
        
        /* YÃ¶netim Paneli - Sadece Ekranda GÃ¶rÃ¼nÃ¼r */
        .admin-panel { 
            background: white; max-width: 600px; margin: 20px auto; 
            padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .input-group { background: #f1f5f9; padding: 15px; border-radius: 12px; margin-bottom: 15px; }
        label { display: block; font-size: 11px; font-weight: 800; color: #64748b; margin-bottom: 5px; }
        input, textarea { width: 100%; border: 1px solid #cbd5e1; border-radius: 8px; padding: 12px; margin-bottom: 10px; box-sizing: border-box; }
        
        .btn { width: 100%; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 16px; margin-bottom: 10px; transition: 0.2s; color: white; }
        .btn-qr { background: var(--p); }
        .btn-scan { background: #7c3aed; }
        .btn-print { background: #1e293b; }
        .btn:active { transform: scale(0.98); }

        /* YazdÄ±rma DÃ¼zeni (A4'e 2 Adet) */
        .print-container { 
            display: none; /* Sadece yazdÄ±rÄ±rken veya QR oluÅŸunca gÃ¶rÃ¼nÃ¼r */
            flex-direction: column; gap: 40px; padding: 20px;
            background: white; align-items: center;
        }
        .qr-item { 
            border: 2px dashed #ccc; padding: 30px; border-radius: 20px; 
            text-align: center; width: 80%; max-width: 400px; page-break-inside: avoid;
        }
        .qr-item h1 { margin: 0 0 10px 0; color: #111; font-size: 24px; }
        .qr-item p { font-size: 16px; color: #444; margin-bottom: 20px; }
        .qr-code-div { display: inline-block; padding: 10px; background: white; border: 1px solid #eee; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; }
            .print-container { display: flex !important; width: 100%; padding: 0; }
            .qr-item { width: 90%; margin: 20px auto; border: 1px solid #000; }
        }
    </style>
</head>
<body>

    <div class="admin-panel no-print">
        <h2 style="text-align:center; margin-top:0;">ðŸ“¡ Reklam & QR YÃ¶netimi</h2>
        
        <div class="input-group">
            <label>1. KAMPANYA BAÅžLIÄžI</label>
            <input type="text" id="tInp" placeholder="Ã–rn: %30 Ä°ndirim FÄ±rsatÄ±!">
            
            <label>2. REKLAM MESAJI</label>
            <textarea id="mInp" rows="2" placeholder="MÃ¼ÅŸteriye Ã¶zel mesajÄ±nÄ±zÄ± buraya yazÄ±n..."></textarea>
            
            <label>3. WEB SÄ°TESÄ° LÄ°NKÄ° (Opsiyonel)</label>
            <input type="text" id="urlInp" placeholder="https://isletmen.com">
        </div>

        <button class="btn btn-qr" onclick="generateQRs()">QR KODLARI OLUÅžTUR</button>
        <button class="btn btn-scan" onclick="powerScan()">ULTRA-BLE TARAMA MODU</button>
        <button class="btn btn-print" onclick="window.print()">A4 SAYFASINA YAZDIR (2 ADET)</button>
        
        <div id="status" style="display:none; text-align:center; padding:10px; font-size:13px; font-weight:bold;"></div>
    </div>

    <div id="printArea" class="print-container">
        <div class="qr-item">
            <h1 class="target-title">Kampanya BaÅŸlÄ±ÄŸÄ±</h1>
            <p class="target-msg">Reklam metni burada gÃ¶rÃ¼necek.</p>
            <div id="qrcode1" class="qr-code-div"></div>
            <div style="margin-top:15px; font-size:10px; color:#888;">isletmen.com | GÃ¼venli DoÄŸrulama</div>
        </div>

        <div class="qr-item">
            <h1 class="target-title">Kampanya BaÅŸlÄ±ÄŸÄ±</h1>
            <p class="target-msg">Reklam metni burada gÃ¶rÃ¼necek.</p>
            <div id="qrcode2" class="qr-code-div"></div>
            <div style="margin-top:15px; font-size:10px; color:#888;">isletmen.com | GÃ¼venli DoÄŸrulama</div>
        </div>
    </div>

<script>
    function generateQRs() {
        const title = document.getElementById('tInp').value || "HoÅŸ Geldiniz!";
        const msg = document.getElementById('mInp').value || "Size Ã¶zel bir teklifimiz var.";
        const web = document.getElementById('urlInp').value || window.location.href;

        // BaÅŸlÄ±k ve mesajlarÄ± gÃ¼ncelle
        document.querySelectorAll('.target-title').forEach(el => el.innerText = title);
        document.querySelectorAll('.target-msg').forEach(el => el.innerText = msg);

        // QR Ä°Ã§eriÄŸi: BaÅŸlÄ±k + Mesaj + Web Sitesi
        const qrText = `KAMPANYA: ${title}\nMESAJ: ${msg}\nWEB: ${web}`;

        // QR AlanlarÄ±nÄ± temizle ve yeniden oluÅŸtur
        ["qrcode1", "qrcode2"].forEach(id => {
            const container = document.getElementById(id);
            container.innerHTML = "";
            new QRCode(container, {
                text: qrText,
                width: 280,
                height: 280,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        });

        document.getElementById('printArea').style.display = "flex";
        alert("QR Kodlar HazÄ±r! 'A4 YazdÄ±r' butonuyla Ã§Ä±ktÄ± alabilirsiniz.");
    }

    async function powerScan() {
        const s = document.getElementById('status');
        try {
            s.style.display = "block"; s.style.background = "#e2e8f0"; s.innerText = "BLE Tarama Modu GÃ¼Ã§lendirildi... Cihaz Bekleniyor.";
            const device = await navigator.bluetooth.requestDevice({
                acceptAllDevices: true,
                optionalServices: ['generic_access', 'device_information']
            });
            s.style.background = "#dcfce7"; s.innerText = "Cihaz YakalandÄ±: " + (device.name || "Ä°simsiz BLE Cihaz");
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        } catch (e) {
            s.innerText = "Hata: " + e.message;
        }
    }
</script>

</body>
</html>
